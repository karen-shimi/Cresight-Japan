const translations = {
    'ja': {
        'home': 'ホーム',
        'about_us': '会社概要',
        'products': '製品', // HTMLに合わせたキー
        'news': 'ニュース',   // HTMLに合わせたキー
        'recruit': '採用情報', // HTMLに合わせたキー
        'contact': 'お問い合わせ ✉',
        'current_lang_display': '日本語',
        'hero_h1': 'Bridging Global Innovation to Japan',
        'hero_p': '海外AI・SaaS企業の日本展開を最速で支援',
        'about-us-p1': 'Cresight Japanは、「世界の革新を、言語の壁なく日本へ」という理念のもと、海外のSaaS・AI企業と日本企業をつなぐ架け橋として設立されました。私たちは、海外で生まれた最先端のテクノロジーを日本の企業が活用できるよう、販売支援、ローカライゼーション、PoC(概念実証)による市場検証を包括的に行っています。',
        'about-us-p2': '日本では優れた海外ソリューションが数多く存在しながらも、言語や文化、契約の壁によって導入が進まないという課題があります。Cresight Japanはその障壁を取り払い、世界中の革新的な製品をスムーズに日本市場へ届けることを目指しています。',
        'about-us-p3': '私たちは、単なる販売代理ではなく「共に市場を創るパートナー」であることにこだわります。海外企業には日本での長期的な成長基盤を、日本企業には海外テクノロジーを最速で取り入れる手段を提供し、双方向の価値創造を実現します。',
        'about-us-p4': 'Cresight Japanは、世界のテクノロジーが日本の課題を解決し、日本から再び世界へと革新が循環していく未来を描いています。その橋の上に立ち、変化を実行するのが、私たちの役割です。',
        'about-us-button':'詳細はこちら',
        'service-for-Japanese':'- 日本企業向け事業',
        'service-text':'海外企業との直接的な橋渡しを行い、製品選定からPoC（概念実証）、本格導入までを一貫してサポートします。',
        'card-1-title':'最新テクノロジーの導入支援',
        'card-1-category':'技術実装',
        'card-1-text':' 世界で注目されるAI・自動化・セキュリティ分野の海外ソフトウェアを厳選し、日本企業の課題に最適化。英語UIや契約の壁を取り除き、導入をスムーズに実現します。',  
        'card-2-title':'PoC（概念実証）による<br>低リスク検証',
        'card-2-category':'コンサルティング',
        'card-2-text':'契約前にトライアル導入を行い、効果をデータで可視化。日本企業のニーズに即した改善提案を海外チームへ直接フィードバックします。',       
        'card-3-title':'運用・サポート体制の構築',
        'card-3-category':'マネージメントサービス',
        'card-3-text':'導入後の運用支援、FAQ整備、社内研修などもサポート。海外企業とのコミュニケーションを代行し、長期的な安定運用を支えます。',
        'Service-for-Global':'- 海外企業向け事業',
        'service-text-g':'Cresight Japanは、海外SaaS/AIスタートアップの日本市場参入をワンストップで支援します。翻訳・販売、市場検証を統合した独自の体制で、最短ルートで日本展開を実現します。成果報酬型を採用しており、初期コストを抑えて市場テストを行うことが可能です。',
        'card-1-title-g':'日本市場への販売・営業代行',
        'card-1-category-g':'セールス・ビジネス開発',
        'card-1-text-g':' ターゲット業界のリサーチから営業活動、契約交渉までを一括でサポート。信頼ある日本企業ネットワークを活かし、最適なリードを獲得します。',
        'card-2-title-g':'翻訳・ローカライゼーション支援',
        'card-2-category-g':'コンテンツ適合化',
        'card-2-text-g':'製品UI、マニュアル、マーケティング資料を自然な日本語に最適化。単なる翻訳ではなく、文化的背景を踏まえた伝わる表現でブランド価値を高めます。',
        'card-3-title-g':'PoC（概念検証）・市場適合テスト',
        'card-3-category-g':'コンサルティング',
        'card-3-text-g':'日本企業との共同プロジェクトを通じ、製品の市場適合性を実際に検証。得られた結果をレポート化し、改良提案まで行います。',
    },
    'en': {
        'home': 'Home',
        'about_us': 'About us',
        'products': 'Products',
        'news': 'News',
        'recruit': 'Recruit',
        'contact': 'Contact ✉',
        'current_lang_display': 'English',
        'hero_h1': 'Bridging Global Innovation to Japan',
        'hero_p': 'Accelerating market entry for overseas AI/SaaS companies in Japan',
        'about-us-p1': 'Cresight Japan was founded with the mission of “Delivering global innovation to Japan without language barriers.”We serve as a bridge between overseas SaaS and AI companies and Japanese enterprises, providing comprehensive support that includes sales representation, localization, and market validation through Proof of Concept (PoC) projects.',
        'about-us-p2': 'While Japan has a strong appetite for cutting-edge technology, many overseas products struggle to enter the market due to language, cultural, and procedural barriers. Cresight Japan eliminates those barriers and enables global solutions to reach Japan faster and more effectively.',
        'about-us-p3': 'We do not position ourselves merely as a distributor, but as a long-term partner who co-creates markets.For global companies, we help establish a sustainable presence in Japan. For Japanese enterprises, we provide seamless access to world-class technologies. Together, we create mutual value across borders.',
        'about-us-p4': 'At Cresight Japan, we envision a future where innovation circulates freely—global technologies solving Japan’s challenges, and Japanese innovation inspiring the world once again. Standing on that bridge, we turn this vision into reality.',
        'about-us-button':'Details here',
        'service-for-Japanese':'- for Japanese',
        'service-text':'We act as a direct bridge between global and Japanese corporations, supporting everything from product selection to PoC (Proof of Concept) and full implementation.',
        'card-1-title':'Global Technology Adoption',
        'card-1-category':'Technical Implementation',
        'card-1-text':' We source innovative solutions in AI, automation, and cybersecurity, and tailor them to your business needs.Our localized onboarding process removes language, legal, and operational barriers.',
        'card-2-title':'PoC & Data-Driven Validation',
        'card-2-category':'Consulting',
        'card-2-text':' Before full adoption, we conduct low-risk PoC trials and measure tangible impact. Our bilingual team shares improvement feedback directly with overseas product teams.',
        'card-3-title':'Ongoing Support & Operations',
        'card-3-category':'Management Services',
        'card-3-text':'We provide continuous support - from training and documentation to customer success management - ensuring your solution runs smoothly in Japan.',
        'Service-for-Global':'- for Global',
        'service-text-g':'Cresight Japan  provides end-to-end market entry support for global SaaS and AI startups entering Japan. Through our integrated system of translation, localization, sales, and PoC validation, we help you establish traction in the Japanese market with speed and precision. Our success-based model minimizes initial cost and focuses on tangible results.',
        'card-1-title-g':'Sales Representation in Japan',
        'card-1-category-g':'Sales & Business Development',
        'card-1-text-g':'We handle lead generation, outreach, and contract negotiation, leveraging our trusted local business network.Our bilingual sales team ensures smooth communication and transparent processes.',
        'card-2-title-g':'Localization & Translation',
        'card-2-category-g':'Content Adaptation',
        'card-2-text-g':' We translate and localize your product interface, documentation, and marketing materials — not word by word, but meaning by meaning — to resonate with Japanese users.',
        'card-3-title-g':'PoC & Market Validation',
        'card-3-category-g':'Consulting',
        'card-3-text-g':'We conduct real-world PoC projects with Japanese enterprises to test market fit, gather feedback, and generate measurable results before full-scale rollout.',
    }
    
};

document.addEventListener('DOMContentLoaded', function() {

    // --- 1. 要素の取得 ---
    
    // ハンバーガーメニュー
    const hamburger = document.querySelector('.hamburger-menu');
    const nav = document.querySelector('.main-nav');

    // PC版の言語選択要素
    const langToggleButtonDesktop = document.getElementById('lang-toggle-button-desktop');
    const langDropdownDesktop = document.getElementById('lang-dropdown-desktop');

    // モバイル版の言語選択要素
    const langToggleButtonMobile = document.getElementById('lang-toggle-button-mobile');
    const langDropdownMobile = document.getElementById('lang-dropdown-mobile');


    // --- 2. ハンバーガーメニューの制御 (開閉機能) ---
    if (hamburger && nav) {
        hamburger.addEventListener('click', function() {
            hamburger.classList.toggle('active');
            nav.classList.toggle('open');
            document.body.classList.toggle('no-scroll', nav.classList.contains('open'));
            
            // ハンバーガーメニューを閉じるときに、モバイルドロップダウンを閉じる
            if (!nav.classList.contains('open') && langDropdownMobile) {
                langDropdownMobile.classList.remove('show');
            }
        });
    }


    // --- 3. ドロップダウン機能の設定 (PC/モバイル共通) ---

    // ドロップダウン機能の共通関数
    function setupDropdown(button, dropdown, otherDropdown) {
        if (button && dropdown) {
            button.addEventListener('click', (event) => {
                event.stopPropagation();
                dropdown.classList.toggle('show'); 
                
                if (otherDropdown && otherDropdown.classList.contains('show')) {
                    otherDropdown.classList.remove('show');
                }
            });
        }
    }

    setupDropdown(langToggleButtonDesktop, langDropdownDesktop, langDropdownMobile);
    setupDropdown(langToggleButtonMobile, langDropdownMobile, langDropdownDesktop);


    // --- 4. ドキュメントクリックで閉じる処理 ---
    document.addEventListener('click', (event) => {
        // PC版を閉じる
        if (langToggleButtonDesktop && langDropdownDesktop) {
            if (!langToggleButtonDesktop.contains(event.target) && !langDropdownDesktop.contains(event.target)) {
                langDropdownDesktop.classList.remove('show');
            }
        }
        // モバイル版を閉じる
        if (langToggleButtonMobile && langDropdownMobile) {
            if (!langToggleButtonMobile.contains(event.target) && !langDropdownMobile.contains(event.target)) {
                langDropdownMobile.classList.remove('show');
            }
        }
    });


    // --- 5. 言語切り替えロジック ---
    function applyTranslations(lang) {
        // 現在の言語表示を更新 (両方)
        const desktopLangDisplay = document.getElementById('current-lang-display-desktop');
        if (desktopLangDisplay) {
            desktopLangDisplay.textContent = translations[lang]['current_lang_display'];
        }

        const mobileLangDisplay = document.getElementById('current-lang-display-mobile');
        if (mobileLangDisplay) {
            mobileLangDisplay.textContent = translations[lang]['current_lang_display'];
        }

        // ★★★ ナビゲーションリンクのテキストを更新 (HTMLとキーを同期) ★★★
        const navItems = document.querySelectorAll('.main-nav li a');
        if (navItems[0]) navItems[0].textContent = translations[lang]['home'];
        if (navItems[1]) navItems[1].textContent = translations[lang]['about_us'];
        if (navItems[2]) navItems[2].textContent = translations[lang]['products'];
        if (navItems[3]) navItems[3].textContent = translations[lang]['news'];
        if (navItems[4]) navItems[4].textContent = translations[lang]['recruit'];
        

        // ★★★ About Us セクションのテキストを更新 ★★★
        const aboutUsTitle = document.getElementById('about-us-title');
        const aboutUsP1 = document.getElementById('about-us-p1');
        const aboutUsP2 = document.getElementById('about-us-p2');
        const aboutUsP3 = document.getElementById('about-us-p3');
        const aboutUsP4 = document.getElementById('about-us-p4');
        const aboutUsButton = document.getElementById('about-us-button');

        if (aboutUsTitle) aboutUsTitle.textContent = translations[lang]['about_us_title'];
        if (aboutUsP1) aboutUsP1.textContent = translations[lang]['about_us_p1'];
        if (aboutUsP2) aboutUsP2.textContent = translations[lang]['about-us-p2'];
        if (aboutUsP3) aboutUsP3.textContent = translations[lang]['about-us-p3'];
        if (aboutUsP4) aboutUsP4.textContent = translations[lang]['about-us-p4'];
        if (aboutUsButton) aboutUsButton.textContent = translations[lang]['about-us-button'];
        
        // ★★★ Service セクションのテキストを更新 ★★★
        const serviceForJapanese = document.getElementById('Service-for-Japanese');
        const serviceText = document.getElementById('service-text');
        const card1Title = document.getElementById('card-1-title');
        const card1Category = document.getElementById('card-1-category');
        const card1Text = document.getElementById('card-1-text');
        const card2Title = document.getElementById('card-2-title');
        const card2Category = document.getElementById('card-2-category');
        const card2Text = document.getElementById('card-2-text');
        const card3Title = document.getElementById('card-3-title');
        const card3Category = document.getElementById('card-3-category');
        const card3Text = document.getElementById('card-3-text');

        if (serviceForJapanese) serviceForJapanese.textContent = translations[lang]['service-for-Japanese'];
        if (serviceText) serviceText.textContent = translations[lang]['service-text'];
        if (card1Title) card1Title.textContent = translations[lang]['card-1-title'];
        if (card1Category) card1Category.textContent = translations[lang]['card-1-category'];
        if (card1Text) card1Text.textContent = translations[lang]['card-1-text'];
        if (card2Title) card2Title.textContent = translations[lang]['card-2-title'];
        if (card2Category) card2Category.textContent = translations[lang]['card-2-category'];
        if (card2Text) card2Text.textContent = translations[lang]['card-2-text'];
        if (card3Title) card3Title.textContent = translations[lang]['card-3-title'];
        if (card3Category) card3Category.textContent = translations[lang]['card-3-category'];
        if (card3Text) card3Text.textContent = translations[lang]['card-3-text'];
        
        // ★★★ Service for Global セクションのテキストを更新 ★★★
        const serviceForGlobal = document.getElementById('Service-for-Global');
        const serviceTextG = document.getElementById('service-text-g');
        const card1TitleG = document.getElementById('card-1-title-g');
        const card1CategoryG = document.getElementById('card-1-category-g');
        const card1TextG = document.getElementById('card-1-text-g');
        const card2TitleG = document.getElementById('card-2-title-g');
        const card2CategoryG = document.getElementById('card-2-category-g');
        const card2TextG = document.getElementById('card-2-text-g');
        const card3TitleG = document.getElementById('card-3-title-g');
        const card3CategoryG = document.getElementById('card-3-category-g');
        const card3TextG = document.getElementById('card-3-text-g');

        if (serviceForGlobal) serviceForGlobal.textContent = translations[lang]['Service-for-Global'];
        if (serviceTextG) serviceTextG.textContent = translations[lang]['service-text-g'];
        if (card1TitleG) card1TitleG.textContent = translations[lang]['card-1-title-g'];
        if (card1CategoryG) card1CategoryG.textContent = translations[lang]['card-1-category-g'];
        if (card1TextG) card1TextG.textContent = translations[lang]['card-1-text-g'];
        if (card2TitleG) card2TitleG.textContent = translations[lang]['card-2-title-g'];
        if (card2CategoryG) card2CategoryG.textContent = translations[lang]['card-2-category-g'];
        if (card2TextG) card2TextG.textContent = translations[lang]['card-2-text-g'];
        if (card3TitleG) card3TitleG.textContent = translations[lang]['card-3-title-g'];
        if (card3CategoryG) card3CategoryG.textContent = translations[lang]['card-3-category-g'];
        if (card3TextG) card3TextG.textContent = translations[lang]['card-3-text-g'];

        
        // Contactボタンのテキストを更新 (両方)
        const contactButtonDesktop = document.querySelector('.contact-button.desktop-only');
        const contactButtonMobile = document.querySelector('.contact-button.mobile-only');
        if (contactButtonDesktop) contactButtonDesktop.textContent = translations[lang]['contact'];
        if (contactButtonMobile) contactButtonMobile.textContent = translations[lang]['contact'];
        
        // ヒーローセクションのテキストを更新
        const heroH1 = document.querySelector('.hero-text h1');
        const heroP = document.querySelector('.hero-text p');
        if (heroH1) heroH1.textContent = translations[lang]['hero_h1'];
        if (heroP) heroP.textContent = translations[lang]['hero_p'];
        
        document.documentElement.lang = lang;
        
        // ドロップダウンを閉じる (両方)
        if (langDropdownDesktop) langDropdownDesktop.classList.remove('show');
        if (langDropdownMobile) langDropdownMobile.classList.remove('show');
    }

    // 言語オプションクリック時の処理
    document.querySelectorAll('.lang-option').forEach(option => {
        option.addEventListener('click', (event) => {
            event.preventDefault(); 
            const newLang = option.dataset.lang;
            localStorage.setItem('selectedLang', newLang);
            applyTranslations(newLang);
        });
    });

    // ページ読み込み時に言語を適用
    const savedLang = localStorage.getItem('selectedLang') || 'en';
    applyTranslations(savedLang);

});